(this["webpackJsonpgoogle-weather-copy"]=this["webpackJsonpgoogle-weather-copy"]||[]).push([[0],{13:function(t,e,n){t.exports={current:"CurrentWeather_current__3eoIk",leftCol:"CurrentWeather_leftCol__3OQxZ",temp:"CurrentWeather_temp__3W1Vd",btns:"CurrentWeather_btns__AZ7d7",btn:"CurrentWeather_btn__Oh3m-",active:"CurrentWeather_active__tCyXI",vertLine:"CurrentWeather_vertLine__3lqeN",other:"CurrentWeather_other__quPtP",rightCol:"CurrentWeather_rightCol__t55u-",btnFindLoc:"CurrentWeather_btnFindLoc__1LIEj",location:"CurrentWeather_location__pkGnp",findInput:"CurrentWeather_findInput__3L8z8",findWrapper:"CurrentWeather_findWrapper__1a7QJ",findList:"CurrentWeather_findList__QGo5A",findItem:"CurrentWeather_findItem__aoEil"}},183:function(t,e,n){},294:function(t,e,n){},295:function(t,e,n){"use strict";n.r(e);var a,c=n(1),r=n.n(c),i=n(79),o=n.n(i),s=(n(182),n(183),n(10)),u=n(29),d=n(65),l=n.n(d),h=n(43),p=n(110),f=n(26),m=Object(f.b)("data/fetchWeather",function(){var t=Object(p.a)(l.a.mark((function t(e,n){var a,c,r,i,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,c=Object(h.a)(e,2),r=c[0],i=c[1],o="https://api.weatherapi.com/v1/forecast.json?key=b8d348df879e486ca0f172620210610&q=".concat(r,",").concat(i,"&days=8&lang=ru"),t.prev=3,t.next=6,fetch(o);case 6:if((s=t.sent).ok){t.next=9;break}throw new Error("Server Error!");case 9:return t.next=11,s.json();case 11:return t.abrupt("return",t.sent);case 14:return t.prev=14,t.t0=t.catch(3),t.abrupt("return",a(t.t0.message));case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(f.b)("data/fetchLocation",function(){var t=Object(p.a)(l.a.mark((function t(e,n){var a,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,c="https://api.weatherapi.com/v1/search.json?key=b8d348df879e486ca0f172620210610&q=".concat(e),t.prev=2,t.next=5,fetch(c);case 5:if((r=t.sent).ok){t.next=8;break}throw new Error("Server Error!");case 8:return t.next=10,r.json();case 10:return t.abrupt("return",t.sent);case 13:return t.prev=13,t.t0=t.catch(2),t.abrupt("return",a(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,n){return t.apply(this,arguments)}}()),b=Object(f.c)({name:"data",initialState:{data:{},listFindLocations:[],statusFetchLocation:null,error:null,statusFetchWeather:null},reducers:{},extraReducers:(a={},Object(u.a)(a,m.pending,(function(t,e){t.statusFetchWeather="loading"})),Object(u.a)(a,m.fulfilled,(function(t,e){t.data=e.payload,t.statusFetchWeather="ok"})),Object(u.a)(a,m.rejected,(function(t,e){t.error=e.payload,t.statusFetchWeather="rejected"})),Object(u.a)(a,j.pending,(function(t,e){t.statusFetchLocation="loading"})),Object(u.a)(a,j.fulfilled,(function(t,e){t.listFindLocations=e.payload,t.statusFetchLocation="ok"})),Object(u.a)(a,j.rejected,(function(t,e){t.error=e.payload,t.statusFetchLocation="rejected"})),a)}),x=(b.actions.setStatusFind,b.reducer),O=n(13),y=n.n(O),g=Object(f.c)({name:"currWeather",initialState:{isMetric:!0,isVisibleFindLocationInput:!1,isAutoGeolocation:!1,currData:{}},reducers:{setCurrData:function(t,e){var n=e.payload.data,a=n.current;t.currData=_(n,a,a.last_updated)},setVisionFindLocationInput:function(t,e){"boolean"!==typeof e.payload?t.isVisibleFindLocationInput=!t.isVisFindLoc:t.isVisibleFindLocationInput=e.payload},setForecastData:function(t,e){var n,a=Object(h.a)(e.payload,2),c=a[0],r=a[1];t.currData.updTimeStamp!==c&&(r.forecast.forecastday.forEach((function(t){return t.hour.forEach((function(t){new Date(t.time).getTime()===c&&(n=t)}))})),t.currData=_(r,n,n.time))},setCurrDayData:function(t,e){var n=Object(h.a)(e.payload,3),a=n[0],c=n[1],r=n[2];t.currData.updTimeStamp!==a&&(t.currData=_(r,c,a,!0))},setMetric:function(t,e){t.isMetric=e.payload},setAutoGeolocation:function(t,e){t.isAutoGeolocation=e.payload}}});function _(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c={weekday:"long",hour:a?void 0:"numeric",minute:a?void 0:"numeric"};return{temp_c:Math.round(a?e.avgtemp_c:e.temp_c),temp_f:Math.round(a?e.avgtemp_f:e.temp_f),icon:e.condition.icon,precip_mm:a?e.totalprecip_mm:e.precip_mm,humidity:a?e.avghumidity:e.humidity,wind_kph:Math.round(a?e.maxwind_kph:e.wind_kph),wind_mph:Math.round(a?e.maxwind_mph:e.wind_mph),country:t.location.country,name:t.location.name,text:e.condition.text,updTime:new Intl.DateTimeFormat("ru-RU",c).format(new Date(n)),updTimeStamp:new Date(n).getTime()}}var v=g.actions,w=v.setAutoGeolocation,k=v.setVisionFindLocationInput,C=v.setCurrData,F=v.setForecastData,L=v.setMetric,W=v.setCurrDayData,D=g.reducer,N=n(5),V=function(t){var e=t.size,n=void 0===e?24:e,a=t.fill,c=void 0===a?"#fbbc04":a;return Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{margin:"0 10px 0 0"},width:n,height:n,viewBox:"0 0 24 24",children:Object(N.jsx)("path",{fill:c,d:"M12 0c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 11c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"})})},Y=function(){var t=Object(s.b)();function e(t){t.target.closest(".js-findWrapper")||n()}function n(){t(k(!1)),document.removeEventListener("click",e)}return{fetchNewWeather:function(e,a,c){t(m([a,c])),e.target.value="",n(),t(w(!1))},hideFindLocationEvent:e,onChangeInputFindLocation:function(e){e.length>2&&t(j(e))},showFindLocationsInput:function(){t(k(!0)),setTimeout((function(){document.addEventListener("click",e)}))},hideFindLocationInput:n}},A=function(){var t=Object(s.c)((function(t){return t.currWeather})),e=t.isAutoGeolocation,n=t.isVisibleFindLocationInput,a=t.isMetric,r=t.currData,i=r.temp_c,o=r.temp_f,u=r.icon,d=r.precip_mm,l=r.humidity,h=r.wind_kph,p=r.wind_mph,f=r.country,m=r.name,j=r.text,b=r.updTime,x=Object(s.c)((function(t){return t.data})),O=x.data,g=x.listFindLocations,_=x.error,v=x.statusFetchLocation,w=Y(),k=w.fetchNewWeather,F=w.onChangeInputFindLocation,W=w.showFindLocationsInput,D=Object(s.b)();return Object(c.useEffect)((function(){D(C({data:O}))}),[O]),Object(N.jsxs)("div",{className:y.a.current,children:[Object(N.jsxs)("div",{className:y.a.leftCol,children:[Object(N.jsx)("img",{width:64,height:64,src:u,alt:"weather icon"}),Object(N.jsx)("span",{className:y.a.temp,children:a?i:o}),Object(N.jsxs)("div",{className:y.a.btns,children:[Object(N.jsx)("button",{disabled:a,onClick:function(){return D(L(!0))},className:"".concat(y.a.btn," ").concat(a?y.a.active:""),children:"\xb0C"}),Object(N.jsx)("span",{className:y.a.vertLine,children:"|"}),Object(N.jsx)("button",{disabled:!a,onClick:function(){return D(L(!1))},className:"".concat(y.a.btn," ").concat(a?"":y.a.active),children:"\xb0F"})]}),Object(N.jsxs)("ul",{className:y.a.other,children:[Object(N.jsxs)("li",{children:["\u041e\u0441\u0430\u0434\u043a\u0438: ",d," \u043c\u043c"]}),Object(N.jsxs)("li",{children:["\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: ",l,"%"]}),Object(N.jsxs)("li",{children:["\u0412\u0435\u0442\u0435\u0440: ",a?"".concat(h," \u043a\u043c/\u0447"):"".concat(p," \u043c\u0438/\u0447")]})]})]}),Object(N.jsxs)("div",{className:y.a.rightCol,children:[n&&!_?Object(N.jsxs)("div",{className:"".concat(y.a.findWrapper," js-findWrapper"),children:[Object(N.jsx)("input",{className:y.a.findInput,onChange:function(t){return F(t.target.value)},placeholder:"\u0413\u043e\u0440\u043e\u0434 (\u043e\u0442 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432) ...",type:"text",name:"country-name"}),Object(N.jsxs)("ul",{className:y.a.findList,children:[g.length>0&&"ok"===v&&g.map((function(t){return Object(N.jsx)("li",{className:y.a.findItem,onClick:function(e){return k(e,t.lat,t.lon)},children:t.name},t.id)})),0===g.length&&"ok"===v&&Object(N.jsx)("li",{className:y.a.findItem,children:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})]}):Object(N.jsxs)("button",{onClick:W,className:y.a.btnFindLoc,children:[e&&Object(N.jsx)(V,{size:20}),Object(N.jsxs)("h1",{className:y.a.location,children:[f,", ",m]})]}),Object(N.jsx)("span",{children:b}),Object(N.jsx)("span",{children:j})]})]})},E=n(163),I=Object(f.c)({name:"graph",initialState:{dataXY:[],typeY:"temp_c",tickValues:[],last_updated:null,slideGraphicsPx:null,minY:-1},reducers:{getXY:function(t,e){t.dataXY.length=0;var n,a=Object(E.a)(e.payload.data.forecast.forecastday);try{for(a.s();!(n=a.n()).done;){n.value.hour.forEach((function(e){t.dataXY.push({time:new Date(e.time).getTime(),temp_c:Math.round(e.temp_c),temp_f:Math.round(e.temp_f),humidity:Math.round(e.humidity),wind_kph:Math.round(e.wind_kph),wind_mph:Math.round(e.wind_mph),wind_degree:e.wind_degree})}))}}catch(c){a.e(c)}finally{a.f()}},getArrHours:function(t,e){t.tickValues.length=0;var n=new Date(t.last_updated).getHours();++n,t.dataXY.forEach((function(e,a){for(var c=n;c<75;c+=3){a===c&&t.tickValues.push(e.time);for(var r=n;r>=0;r-=3)a===r&&t.tickValues.push(e.time)}}))},setCurrUpdTime:function(t,e){t.last_updated=e.payload.data.current.last_updated},setType:function(t,e){t.typeY=e.payload},setSlideGraphics:function(t,e){if(t.dataXY.length){var n=e.payload,a=new Date(n).getTime(),c=new Date(t.last_updated).getTime();a<c&&(a=c);var r=650*((a-t.dataXY[0].time)/36e5-2.9)/24;r>1275&&(r=1275),r<0&&(r=0),t.slideGraphicsPx=r}},getMinY:function(t,e){t.minY=t.dataXY.reduce((function(e,n){return e>=n[t.typeY]&&(e=n[t.typeY]-1),e}),-1)}}}),M=I.actions,S=(M.resetGraphicsStates,M.getXY),T=M.setSlideGraphics,G=M.getArrHours,X=(M.getVisualY,M.setCurrUpdTime),z=M.setType,H=M.getMinY,P=I.reducer,q=function(){var t=Object(s.c)((function(t){return t.currWeather})).isMetric,e=Object(s.c)((function(t){return t.graphics})).typeY,n=Object(s.b)();function a(a,c){e!==a&&(e.includes("".concat(a))||(console.log("handleClick"),c.target.parentElement.querySelectorAll("button").forEach((function(t){return t.className=""})),c.target.classList.add("active"),n(z("temp"!==a?"wind"!==a?a:"".concat(t?"wind_kph":"wind_mph"):"".concat(t?"temp_c":"temp_f")))))}return Object(N.jsxs)("div",{className:"type-btns",children:[Object(N.jsx)("button",{className:"active",onClick:function(t){return a("temp",t)},children:"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),Object(N.jsx)("span",{className:"vert-line",children:"|"}),Object(N.jsx)("button",{onClick:function(t){return a("humidity",t)},children:"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c"}),Object(N.jsx)("span",{className:"vert-line",children:"|"}),Object(N.jsx)("button",{onClick:function(t){return a("wind",t)},children:"\u0412\u0435\u0442\u0435\u0440"})]})},B=n(303),U=n(154),J=n(304),Q=n(305),R=n(156),Z=n(301),K=function(t){var e=t.x,n=(t.y,t.dx),a=t.datum,c=Object(s.c)((function(t){return t.graphics})).tickValues,r=a.wind_degree,i=a.wind_kph,o=c.includes(a.time);return i<10&&(i=10),Object(N.jsx)(N.Fragment,{children:o&&Object(N.jsx)("svg",{x:e-(i+5)/2+n,y:53,children:Object(N.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"".concat(i,"px"),height:"42px",viewBox:"0 0 42 42",enableBackground:"new 0 0 42 42",children:Object(N.jsx)("polygon",{fill:"#AEBFCF",style:{transformOrigin:"50% 50%",transform:"rotate(".concat(r-90,"deg)")},points:"27,37.5 42,20 27,4.5 18,4.5 30,16.5 0,16.5 0,23.5 30,23.5 18,37.5 "})})})})},$=function(t){var e=Object(s.c)((function(t){return t.data.data})),n=Object(s.b)();return Object(N.jsx)("text",{x:t.x,y:t.y,children:Object(N.jsx)("tspan",{onClick:function(){return n(F([t.datum,e]))},style:{fontSize:12,fill:"#70757a"},x:t.x,children:t.text})})},tt=function(){var t=Object(s.c)((function(t){return t.data})).data,e=Object(s.c)((function(t){return t.graphics})).typeY;return{getVisualY:function(n){function a(){if(e.includes("temp"))return n[e];switch(e){default:return n[e];case"humidity":return"".concat(n[e],"%");case"wind_kph":return"".concat(n[e]," \u043a\u043c/\u0447");case"wind_mph":return"".concat(n[e]," \u043c\u0438/\u0447")}}var c=new Date(t.current.last_updated).getHours(),r=new Date(n.time).getHours();e.includes("temp")||++c;for(var i=c;i<27;i+=3){if(r===i)return a();for(var o=c;o>=0;o-=3)if(r===o)return a()}},chartsStyles:{VictoryAxis:{tickLabels:{fontFamily:"Arial",fontSize:12,fill:"#70757a"},axis:{stroke:null}},VictoryArea:{data:{fill:"".concat("humidity"===e?"#e8f0fe":"#fff5cc"),stroke:"".concat("humidity"===e?"#1a73e8":"#ffcc00"),strokeWidth:2},labels:{fontFamily:"Arial",fontSize:11,fontWeight:700,fill:"".concat("humidity"===e?"#1a73e8":"rgb(181, 181, 181)"),cursor:"pointer"}}}}},et=function(t){var e=t.datum,n=t.x,a=t.dx,c=t.y,r=t.dy,i=t.style,o=Object(s.c)((function(t){return t.data.data})),u=Object(s.c)((function(t){return t.currWeather})).currData,d=Object(s.b)(),l=tt().getVisualY;return Object(N.jsxs)("g",{onClick:function(){return d(F([e.time,o]))},style:i,x:n,y:l(e),children:[Object(N.jsx)("rect",{vectorEffect:"non-scaling-stroke",height:"85",width:650/24,x:n,fill:"transparent",y:c-25}),Object(N.jsx)("text",{style:{fill:new Date(u.updTimeStamp).setMinutes(0)===e.time?"rgb(85, 85, 85)":"inherit"},x:n+a,y:c,dy:r,children:Object(N.jsx)("tspan",{children:l(e)})})]})},nt=function(){var t=Object(s.c)((function(t){return t.data})).data,e=Object(s.c)((function(t){return t.graphics})),n=e.dataXY,a=e.slideGraphicsPx,r=e.typeY,i=e.tickValues,o=e.minY,u=Object(s.c)((function(t){return t.currWeather})).isMetric,d=Object(s.b)(),l=tt(),h=l.getVisualY,p=l.chartsStyles;return Object(c.useEffect)((function(){d(S({data:t})),d(X({data:t})),d(G()),d(T(t.current.last_updated))}),[t]),Object(c.useEffect)((function(){r.includes("temp")&&d(z("".concat(u?"temp_c":"temp_f"))),r.includes("wind")&&d(z("".concat(u?"wind_kph":"wind_mph")))}),[u]),Object(c.useEffect)((function(){d(H())}),[n]),Object(N.jsxs)(B.a,{width:1925,height:125,padding:{bottom:20,top:25,left:0,right:0},domainPadding:{y:[15,25]},containerComponent:Object(N.jsx)(U.a,{style:{transform:"translateX(-".concat(a,"px)"),transition:"all 1000ms cubic-bezier(.51,-0.17,0,1)"},responsive:!1}),children:[Object(N.jsx)(J.a,{name:"VictoryAxis",crossAxis:!1,tickValues:i,tickFormat:function(t){return"".concat(new Date(t).getHours(),":00")},style:p.VictoryAxis,tickLabelComponent:Object(N.jsx)($,{y:123})}),r.includes("wind")?Object(N.jsx)(Q.a,{name:"windChart",data:n,x:"time",style:{labels:{fontFamily:'"Arial", sans-serif',fontSize:12,stroke:void 0}},labels:function(t){var e=t.datum;return h(e)},dataComponent:Object(N.jsx)(K,{dx:15}),labelComponent:Object(N.jsx)(R.a,{dx:15,y:35})}):Object(N.jsx)(Z.a,{name:"chart",y0:function(){return o},interpolation:"humidity"===r?"step":"basis",style:p.VictoryArea,data:n,x:"time",y:r,labels:function(t){var e=t.datum;return h(e)},labelComponent:Object(N.jsx)(et,{y:r.includes("temp")?void 0:45,dx:r.includes("temp")?8:2,dy:-10})})]})},at=function(){var t=Object(s.c)((function(t){return t.data})).data,e=Object(s.c)((function(t){return t.currWeather})),n=e.currData,a=e.isMetric,c=Object(s.b)();function r(e){var r=e.day,i=r.maxtemp_c,o=r.maxtemp_f,s=r.mintemp_c,u=r.mintemp_f,d=e.day.condition,l=d.icon,p=d.text,f=new Date(n.updTimeStamp).getDate(),m=new Date(e.date).getDate(),j=f===m,b=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map((function(t){return Math.round(t)}))}(i,o,s,u),x=Object(h.a)(b,4);return i=x[0],o=x[1],s=x[2],u=x[3],Object(N.jsxs)("button",{onClick:function(n){return function(e,n,a){if(!a){var r=e.target.closest("button");r.classList.contains("active")||(r.parentElement.querySelectorAll("button").forEach((function(t){return t.classList.remove("active")})),r.classList.add("active")),c(T(n.date)),c(W([n.date,n.day,t]))}}(n,e,j)},className:"day-btn ".concat(f===m?"active":""),children:[Object(N.jsxs)("div",{children:[" ",new Intl.DateTimeFormat("ru-RU",{weekday:"short"}).format(new Date(e.date))]}),Object(N.jsx)("img",{width:64,height:64,src:l,alt:p}),Object(N.jsx)("br",{}),Object(N.jsxs)("span",{children:["\xa0\xa0","".concat(a?i:o),"\xb0\xa0"]}),Object(N.jsxs)("span",{className:"day-btn__f",children:["".concat(a?s:u),"\xb0"]})]},e.date)}return Object(N.jsx)("div",{className:"day-btns",children:t.forecast.forecastday.map((function(t){return r(t)}))})};var ct=function(){var t=Object(s.c)((function(t){return t.data})),e=t.error,n=t.statusFetchWeather,a=Object(s.b)();return Object(c.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(t){a(m([t.coords.latitude,t.coords.longitude])),a(w(!0))}),(function(t){return a(m([34.052235,-118.243683]))}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}),[]),Object(N.jsxs)("div",{className:"App",children:["loading"===n&&Object(N.jsx)("h2",{children:"Loading.."}),e&&Object(N.jsxs)("h2",{style:{color:"red"},children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",e]}),"ok"===n&&!e&&Object(N.jsxs)("div",{className:"container",children:[Object(N.jsx)(A,{}),Object(N.jsx)(q,{}),Object(N.jsx)("div",{className:"charts",children:Object(N.jsx)(nt,{})}),Object(N.jsx)(at,{})]})]})},rt=(n(294),Object(f.a)({reducer:{data:x,graphics:P,currWeather:D}}));o.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(s.a,{store:rt,children:Object(N.jsx)(ct,{})})}),document.getElementById("root"))}},[[295,1,2]]]);
//# sourceMappingURL=main.972a25e6.chunk.js.map